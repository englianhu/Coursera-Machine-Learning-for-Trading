---
title: "<img src='figure/coursera.jpg' width='37'> <img src='figure/NYIF.jpeg' width='80'>"
subtitle: "<span style='color:white; background-color:#4E79A7;'>Using Machine Learning in Trading and Finance</span>"
author: "[Â®Î³Ïƒ, Lian Hu](https://englianhu.github.io) <img src='figure/quantitative trader 1.jpg' width='12'> <img src='figure/ENG.jpg' width='24'> Â®"
date: "`r lubridate::today('Asia/Tokyo')`"
output:
  html_document: 
    mathjax: https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js
    number_sections: yes
    toc: yes
    toc_depth: 6
    toc_float:
      collapsed: yes
      smooth_scroll: yes
    code_folding: hide
    css: CSSBackgrounds.css
---

<br>
<span style='color:green'>**Theme Song**</span>
<br>

<audio src="music/å°æ¾æ‹“ä¹Ÿ - ä¸çŸ¥é“æ–¹å‘ Takuya Komatsu (åŸåˆ›æ­Œæ›²) (Better Ownself).mp3" controls></audio>
<br>

<span style='color:yellow; background-color:red;'>**CHN**</span> : <span style='color:#4E79A7'>åªè¦æˆ‘è¿˜æ˜¯çœŸæ­£çš„æˆ‘ï¼Œè¶…è¶Šè‡ªå·±æ‰æœ‰æ›´å¥½ç»“æœ</span>

<span style='color:red; background-color:blue;'>**ENG**</span> : <span style='color:#4E79A7'>As long as I am real, I can surpass myself to have better results</span>

<span style='color:red; background-color:white;'>**JPN**</span> : <span style='color:#4E79A7'>ç§ãŒæœ¬å½“ã®ç§ã§ã‚ã‚Œã°ã€è‡ªåˆ†ã‚’è¶…ãˆã¦ã“ãã€ã‚ˆã‚Šè‰¯ã„çµæœãŒå¾—ã‚‰ã‚Œã¾ã™</span>

<span style='color:blue; background-color:red;'>**T**</span><span style='color:white; background-color:red;'>**W**</span><span style='color:blue; background-color:red;'>**N**</span> : <span style='color:#4E79A7'>åªè¦æˆ‘é‚„æ˜¯çœŸæ­£çš„æˆ‘ï¼Œè¶…è¶Šè‡ªå·±æ‰æœ‰æ›´å¥½çµæœ</span>

<br>

------

# Setting

## SCSS Setup

<style>
pre {
  overflow-x: auto;
}
pre code {
  word-wrap: normal;
  white-space: pre;
}
.table-hover > tbody > tr:hover { 
  background-color: #8D918D;
}
</style>

```{r class.source='bg-success', class.output='bg-primary', message = FALSE, warning = FALSE}
# install.packages("remotes")
library('BBmisc', 'rmsfuns')
#remotes::install_github("rstudio/sass")
lib('sass')
```

```{scss class.source='bg-success', class.output='bg-primary'}
/* https://stackoverflow.com/a/66029010/3806250 */
h1 { color: #002C54; }
h2 { color: #2F496E; }
h3 { color: #375E97; }
h4 { color: #556DAC; }
h5 { color: #92AAC7; }

/* ----------------------------------------------------------------- */
/* https://gist.github.com/himynameisdave/c7a7ed14500d29e58149#file-broken-gradient-animation-less */
.hover01 {
  /* color: #FFD64D; */
  background: linear-gradient(155deg, #EDAE01 0%, #FFEB94 100%);
  transition: all 0.45s;
  &:hover{
    background: linear-gradient(155deg, #EDAE01 20%, #FFEB94 80%);
    }
  }

.hover02 {
  color: #FFD64D;
  background: linear-gradient(155deg, #002C54 0%, #4CB5F5 100%);
  transition: all 0.45s;
  &:hover{
    background: linear-gradient(155deg, #002C54 20%, #4CB5F5 80%);
    }
  }

.hover03 {
  color: #FFD64D;
  background: linear-gradient(155deg, #A10115 0%, #FF3C5C 100%);
  transition: all 0.45s;
  &:hover{
    background: linear-gradient(155deg, #A10115 20%, #FF3C5C 80%);
    }
  }
```

```{r global_options, class.source='hover01', class.output='hover02'}
## https://stackoverflow.com/a/36846793/3806250
options(width = 999)
knitr::opts_chunk$set(class.source = 'hover01', class.output = 'hover02', class.error = 'hover03')
```

<br><br>

## Setup

```{r warning=FALSE, message=FALSE}
if(!suppressPackageStartupMessages(require('BBmisc'))) {
  install.packages('BBmisc', dependencies = TRUE, INSTALL_opts = '--no-lock')
}
suppressPackageStartupMessages(require('BBmisc'))
# suppressPackageStartupMessages(require('rmsfuns'))

pkgs <- c('devtools', 'knitr', 'kableExtra', 'tidyr', 
          'readr', 'lubridate', 'reprex', 'magrittr', 
          'timetk', 'plyr', 'dplyr', 'stringr', 
          'tdplyr', 'tidyverse', 'formattable', 
          'echarts4r', 'paletteer')

suppressAll(lib(pkgs))
# load_pkg(pkgs)

## Set the timezone but not change the datetime
Sys.setenv(TZ = 'Asia/Tokyo')
## options(knitr.table.format = 'html') will set all kableExtra tables to be 'html', otherwise need to set the parameter on every single table.
options(warn = -1, knitr.table.format = 'html')#, digits.secs = 6)

## https://stackoverflow.com/questions/39417003/long-vectors-not-supported-yet-abnor-in-rmd-but-not-in-r-script
knitr::opts_chunk$set(message = FALSE, warning = FALSE)#, 
                      #cache = TRUE, cache.lazy = FALSE)

rm(pkgs)
```

<br><br>

# Tutorial

## Wk 1

### Wk 1.1 : Introduction to Quantitative Trading and TensorFlow

#### Wk 1.1.1 : Introduction to TensorFlow, Trading, ML

##### Wk 1.1.1.2 : å­¦ç¿’ç”¨æ•™æ : Welcome to Using Machine Learning in Trading and Finance

> **Welcome to Using Machine Learning in Trading and Finance**
We designed this course for finance, investment management and trading professionals. Machine learning and data science professionals who are interested in applying their skills to developing trading strategies can also benefit from this course. For those of you who are new to trading and investing,  we give a brief introduction to these areas at the beginning of Course 1 : Introduction to Trading, Machine Learning and GCP. It would be helpful to have a basic understanding of financial markets (equities, bonds, derivatives, market structure, and hedging. 
>
If you feel you need a more comprehensive introduction to financial markets, Coursera offers "The Role of Global Financial Markets" at <https://www.coursera.org/learn/capital-markets>. The first two weeks (6 hours) of this four-week course should be sufficient.
>
To be successful in this course, you should have a basic competency in Python programming and familiarity with pertinent libraries for machine learning, such as Scikit-Learn, StatsModels, and Pandas. If you passed the Python pretest then you should not have any difficulties completing the Jupyter notebooks and QwikLabs that are used throughout the courses. Experience with SQL will be helpful, but is not required. You should have a background in statistics (expected values and standard deviation, Gaussian distributions, higher moments, probability, linear regressions).
>
At the end of the course you will be able to do the following: 
>
- Design basic quantitative trading strategies 
- Identify key metrics used to measure trading strategy performance
- Use Keras and TensorFlow to build machine learning models
- Build a pair trading strategy prediction model and back test it
- Build a momentum-based trading model and back test it
- Finally, please feel free to post any questions or comments in the [discussion forums](https://www.coursera.org/learn/introduction-trading-machine-learning-gcp/discussions).

#### Wk 1.1.2 : Understand Quantitative Trading Strategies

##### Wk 1.1.2.1 : å‹•ç”»ä¸­ã®ãƒ†ã‚¹ãƒˆ : Basic Trading Strategy Entries and Exits Endogenous Exogenous

è³ªå• 1 : If you are long an asset (or instrument), what are some examples of pre-planned risk management?

<span style='color:green'>âœ”ï¸ A sell order above the current market price</span>

><span style='color:#72e67e'>**æ­£è§£**
This would automatically take a profit on your holding if the market trades higher and would also reduce (or eliminate) your long exposure which would reduce your risk. This is a trade "exit" which we will talk about later.</span>

âŒ A buy order above the current market price

><span style='color:#e99986'>**ã“ã‚Œã‚’é¸æŠã—ãªã„ã§ãã ã•ã„**
This would add to your long position and increase your risk exposure. This is not risk management but could be part of a momentum strategy which we will talk about in later session.</span>

<span style='color:green'>âœ”ï¸ A sell order below the current market price</span>

><span style='color:#72e67e'>**æ­£è§£**
This is a stop-loss order that would limit your losses on your long position in the market trades lower. We will talk about different types of stop losses later.</span>

âŒ A buy order below the current market price

><span style='color:#e99986'>**ã“ã‚Œã‚’é¸æŠã—ãªã„ã§ãã ã•ã„**
This would increase your risk exposure when you are already taking a loss on your current long position. this is an example of a trade "entry" which we will talk about later.</span>

è³ªå• 2 : Which of the following are examples of a combination of endogenous and exogenous trading rules

âŒ Sell Microsoft if the closing price is below the daily average and the volume traded is higher than the previous day's volume

><span style='color:#e99986'>**ã“ã‚Œã‚’é¸æŠã—ãªã„ã§ãã ã•ã„**
This is a combination of two endogenous rules as both are based on Microsoft's price and volume traded.</span>

<span style='color:green'>âœ”ï¸ Sell Microsoft if the closing price is below the daily average and the closing price of SPY (S&P 500 ETF) is also below its daily average.</span>

><span style='color:#72e67e'>**æ­£è§£**
This is a combination of and endogenous rule based on Microsoft's closing price and an exogenous rule based on SPY's closing price.</span>

<span style='color:green'>âœ”ï¸ Sell Microsoft if trading volume is lower than the previous day and the unemployment rate increased during the previous month.</span>

><span style='color:#72e67e'>**æ­£è§£**
This is a combination of and endogenous rule based on Microsoft's trading volume and an exogenous rule based on the level of a macroeconomic variable.</span>

âŒ Buy Apple if reported quarterly profits are up and Microsoft's reported quarterly sales are down.

><span style='color:#e99986'>**ã“ã‚Œã‚’é¸æŠã—ãªã„ã§ãã ã•ã„**
This is a combination of two exogenous rules, one based on Apple's fundamental data and one based on Microsoft's fundamental data.</span>

##### Wk 1.1.2.2 : å‹•ç”»ä¸­ã®ãƒ†ã‚¹ãƒˆ : Basic Trading Strategy Building a Trading Model

è³ªå• 1 : You have sold short Amazon at 1,800 and have a 50 basis point profit objective, Which order should you place for your profit exit?

- Buy Amazon at 1,890
- Sell Amazon at 1,890
- Buy Amazon at 1,710
- <span style='color:green'>âœ”ï¸ Sell Amazon at 1,710</span>

><span style='color:#72e67e'>**æ­£è§£**
This would be a profit exit as you have sold Amazon short at 1,800 and bought it back at 1,710 for a profit of 90 or 0.5%</span>

##### Wk 1.1.2.3 : å‹•ç”»ä¸­ã®ãƒ†ã‚¹ãƒˆ : Advanced Concepts in Trading Strategies

è³ªå• 1 : If you sell MSFT at 150  and have a profit objective of 500 basis points and a loss tolerance of 200 basis points what exit orders should you place?

- Buy MSFT at 147 and buy MSFT at 157.5
- Sell MSFT at 147 and sell MSFT at 157.5
- Buy MSFT at 142.5 and buy MSFT at 153
- <span style='color:green'>âœ”ï¸ Buy MSFT at 147 and buy MSFT at 153</span>

><span style='color:#72e67e'>**æ­£è§£**
This would be a profit objective 500 basis points (as selling MSFT at 150 and buying it back at 142.5 would give you a profit of 7.5 or 5%) and a loss tolerance of 200 basis points (as selling MSFT at 150 and buying it back at 153 would give you a loss of 3 or 2%.</span>

è³ªå• 2 : You are trading Alphabet (GOOG) and have entered with a buy of 1000 shares at $1100. You have a profit target of 400 basis points and a dynamic stop-loss initially set at 200 basis points below your entry point. During the next week the trading range for GOOG is 1080 to 1130.  At the end of the week the price of GOOG is 1110 and your trade is still open. What exit orders do you currently have in the market?

- Stop-loss order to sell GOOG at 1078 and a limit order to sell GOOG at 1144.
- Stop-loss order to sell GOOG at 1107.40 and a limit order to sell GOOG at 1175.2.
- Stop-loss order to sell GOOG at 1107.40 and a limit order to sell GOOG at 1144.
- <span style='color:green'>âœ”ï¸ Stop-loss order to sell GOOG at 1100 and a limit order to sell GOOG at 1144</span>

><span style='color:#72e67e'>**æ­£è§£**
Yes. You correctly adjusted your dynamic stop-loss order so that it is 200 basis points below the maximum price of GOOG during the week, and you kept your profit exit order at its original level of 4% above your entry point of 1100.</span>

è³ªå• 3 : You are trading Microsoft (MSFT) and have shorted 1,000 shares at $160. You have a profit target of 500 basis points and a variable dynamic stop-loss initially set at 300 basis points above your entry point.

Your risk management strategy is to reduce the size of your stop-loss margin by 50% of your unrealized profit ( on your MSFT short position and to have the stop-loss level adjust to the current MSFT price if your trade has an unrealized profit. If your trade has an unrealized loss the stop-loss level stays at the original level

During the next 5 days the trading range for MSFT is 154 to 164. At the end of the week the price of MSFT is 154 and your trade is still open. What exit orders do you currently have in the market?

- Stop-loss order to buy MSFT at 161.62 and a limit order to buy back MSFT at 152.
- Stop-loss order to buy MSFT at 158.62 and a limit order to buy back MSFT at 152.
- Stop-loss order to buy MSFT at 164.80 and a limit order to buy back MSFT at 152.
- <span style='color:green'>âœ”ï¸ Stop-loss order to buy MSFT at 155.62 and a limit order to buy back MSFT at 152.</span>

><span style='color:#72e67e'>**æ­£è§£**
Yes, these would the exit orders based on a variable dynamic stop loss where the stop-loss level trails the lowest price achieved by MSFT during the period and the stop-loss margin is reduced by 50% of the unrealized profit. The stop-loss level for a dynamic stop loss would be 154 * 1.03 = 158.62. As you are using a variable dynamic stop loss, and your short position has an unrealized profit of 160 - 154 = \$6, you need to reduce the stop-loss margin by 50% of this amount or \$3. Your stop loss should be set at 158.62 - 3 = 155.62.</span>

##### Wk 1.1.2.4 : ãƒ†ã‚¹ãƒˆ : Understand Quantitative Strategies

**Understand Quantitative Strategies (åˆè¨ˆç‚¹æ•° 4)**

è³ªå• 1 : If you believe that the price and volume history of an asset are all that is needed to design a trading strategy then you would would use an endogenous trading rule. What is the theoretical justification for using this type of strategy? (1ç‚¹)

- Markets are efficient and fully incorporate all available information (both public and private).
- Asset prices follow a random walk with equal probabilities of increasing and decreasing
- <span style='color:green'>âœ”ï¸ Asset and market prices tend to have momentum so that stocks whose prices are in an up trends tend to increase in value and those in a downtrend tend to decrease in value.</span>

><span style='color:#72e67e'>**æ­£è§£**
Yes, if you believe that asset prices have momentum then price and volume data is all you need to make predictions of future prices.</span>

- <span style='color:green'>âœ”ï¸ Fundamental data such as historic earning and sales growth are already fully reflected in the current market price and so have no predictive power.</span>

><span style='color:#72e67e'>**æ­£è§£**
Yes, if you instead believed that fundamental data have predictive value, then you should incorporate them into an exogenous trading rule.</span>

è³ªå• 2 : The basic trading model parameters are entry signal, profit exit, stop-loss and time-out. How can you use these parameters and machine learning to optimize your trading strategy? (1ç‚¹)

- Vary the the type of entry signal and profit exit levels in backtesting with the objective of maximizing profit.
- <span style='color:green'>âœ”ï¸ Vary the the type of entry signal, profit exit levels,  stop loss levels and trade completion time limits in backtesting with the objective of maximizing risk adjusted return (Sharpe ratio) within your tolerance for PnL volatility and maximum drawdown.</span>

><span style='color:#72e67e'>**æ­£è§£**
Yes, Sharpe ratio maximization leads to an optimal trading strategy as long as it is constrained by time limits, PnL volatility limits and maximum drawdown tolerance. This will give you a strategy with stop-loss levels that can be tolerated when you implement it in  live trading.</span>

- Vary the the type of entry signal and profit exit levels in backtesting with the objective of maximizing risk adjusted return (Sharpe ratio).

è³ªå• 3 : The main benefit of a dynamic stop loss over a static stop loss is that: (1ç‚¹)

- <span style='color:green'>âœ”ï¸ Dynamic stop losses reduce the expected risk of your strategy.</span>

><span style='color:#72e67e'>æ­£è§£**
Yes. Dynamic stop losses, which maintain a fixed margin between the stop-loss level and the most favorable market price achieved, can reduce the maximum loss in a strategy (at worst the maximum loss is unaffected). This reduces the expected risk in the strategy but also make it more likely that you will be stopped out rather than profited out. This can have a negative impact on your expected return from a strategy.</span>

- Dynamic stop losses increase your expected returns from a trading strategy.
- Dynamic stop losses guarantee that your strategy will not make a loss even if it is stopped out.

è³ªå• 4 : Endogenous trading rules are often created by: (1ç‚¹)

- <span style='color:green'>âœ”ï¸ Technical analysts</span>

><span style='color:#72e67e'>**æ­£è§£**
Yes, Technical analysts or chartists believe that all of the information necessary to create a trading rule or strategy is contained in the price and volume history of an asset.</span>

- Statistical arbitrage traders
- Strategists
- Quantitative trading groups

### Wk 1.2 : Introduction to TensorFlow

#### Wk 1.2.1 : Introduction to TensorFlow

##### Wk 1.2.1.7 : Lab: Writing low-level TensorFlow Programs

**Lab: Writing low-level TensorFlow Programs**

In this lab, you will create a machine learning model using the TensorFlow Estimator class and evaluate its performance.

**Tips for Course Labs**
Get the most out of Coursera and Qwiklabs by trying our tips below.

**Avoid account confusion with private browsing**
**Close this page and log back in to Coursera in Incognito mode** before moving on. When you return to this course and lab instructions page, click Open Tool to continue.

By using incognito mode, this ensures that you don't accidentally use your own Google account (including Gmail) while accessing the Google Cloud Console. This also prevents Qwiklabs from logging you out of your own Google accounts.

Detailed instructions for using Incognito mode in Google Chrome are [available here](https://support.google.com/chrome/answer/95464?co=GENIE.Platform%3DDesktop&hl=en). Depending on your browser, Incognito mode might also be called Private Browsing or InPrivate Browsing.

To ensure lab completion is marked in Coursera:

1. Access each individual lab by clicking **Open Tool** in Coursera:
2. Complete the lab in Qwiklabs.
3. Click **End Lab** in Qwiklabs (click this only after you are ready to end the lab)
4. Close the Qwiklabs browser window or tab.

If you experience any issues and need support, [submit a request](https://goo.gl/LdYwdN) here. By opening the tool, you are agreeing to Qwiklabs' [Terms of Service)[https://qwiklabs.com/terms_of_service].

##### Wk 1.2.1.13 : Lab: Manipulating data with TensorFlow Dataset API

**Lab: Manipulating data with TensorFlow Dataset API**

In this lab, you will create a machine learning model using the TensorFlow Estimator class and evaluate its performance.

**Tips for Course Labs**
Get the most out of Coursera and Qwiklabs by trying our tips below.

**Avoid account confusion with private browsing**
**Close this page and log back in to Coursera in Incognito mode** before moving on. When you return to this course and lab instructions page, click Open Tool to continue.

By using incognito mode, this ensures that you don't accidentally use your own Google account (including Gmail) while accessing the Google Cloud Console. This also prevents Qwiklabs from logging you out of your own Google accounts.

Detailed instructions for using Incognito mode in Google Chrome are [available here](https://support.google.com/chrome/answer/95464?co=GENIE.Platform%3DDesktop&hl=en). Depending on your browser, Incognito mode might also be called Private Browsing or InPrivate Browsing.

To ensure lab completion is marked in Coursera:

1. Access each individual lab by clicking **Open Tool** in Coursera:
2. Complete the lab in Qwiklabs.
3. Click **End Lab** in Qwiklabs (click this only after you are ready to end the lab)
4. Close the Qwiklabs browser window or tab.

If you experience any issues and need support, [submit a request](https://goo.gl/LdYwdN) here. By opening the tool, you are agreeing to Qwiklabs' [Terms of Service](https://qwiklabs.com/terms_of_service).

<br>

## Wk 2

### Wk 2.1 : Training neural networks with Tensorflow 2 and Keras

#### Wk 2.1.1 : Overview of Neural Networks and Introduction to Keras APIs

##### Wk 2.1.1.7 : Lab: Introducing the Keras Sequential API

**Lab: Introducing the Keras Sequential API**

In this lab, you will create a machine learning model using the TensorFlow Estimator class and evaluate its performance.

**Tips for Course Labs**
Get the most out of Coursera and Qwiklabs by trying our tips below.

**Avoid account confusion with private browsing**
**Close this page and log back in to Coursera in Incognito mode** before moving on. When you return to this course and lab instructions page, click Open Tool to continue.

By using incognito mode, this ensures that you don't accidentally use your own Google account (including Gmail) while accessing the Google Cloud Console. This also prevents Qwiklabs from logging you out of your own Google accounts.

Detailed instructions for using Incognito mode in Google Chrome are [available here](https://support.google.com/chrome/answer/95464?co=GENIE.Platform%3DDesktop&hl=en). Depending on your browser, Incognito mode might also be called Private Browsing or InPrivate Browsing.

To ensure lab completion is marked in Coursera:

1. Access each individual lab by clicking **Open Tool** in Coursera:
2. Complete the lab in Qwiklabs.
3. Click **End Lab** in Qwiklabs (click this only after you are ready to end the lab)
4. Close the Qwiklabs browser window or tab.

If you experience any issues and need support, [submit a request](https://goo.gl/LdYwdN) here. By opening the tool, you are agreeing to Qwiklabs' [Terms of Service](https://qwiklabs.com/terms_of_service).

##### Wk 2.1.1.13 : Lab: Introducing the Keras Functional API

**Lab: Introducing the Keras Functional API**

In this lab, you will create a machine learning model using the TensorFlow Estimator class and evaluate its performance.

**Tips for Course Labs**
Get the most out of Coursera and Qwiklabs by trying our tips below.

**Avoid account confusion with private browsing**
**Close this page and log back in to Coursera in Incognito mode** before moving on. When you return to this course and lab instructions page, click Open Tool to continue.

By using incognito mode, this ensures that you don't accidentally use your own Google account (including Gmail) while accessing the Google Cloud Console. This also prevents Qwiklabs from logging you out of your own Google accounts.

Detailed instructions for using Incognito mode in Google Chrome are [available here](https://support.google.com/chrome/answer/95464?co=GENIE.Platform%3DDesktop&hl=en). Depending on your browser, Incognito mode might also be called Private Browsing or InPrivate Browsing.

To ensure lab completion is marked in Coursera:

1. Access each individual lab by clicking **Open Tool** in Coursera:
2. Complete the lab in Qwiklabs.
3. Click **End Lab** in Qwiklabs (click this only after you are ready to end the lab)
4. Close the Qwiklabs browser window or tab.

If you experience any issues and need support, [submit a request](https://goo.gl/LdYwdN) here. By opening the tool, you are agreeing to Qwiklabs' [Terms of Service](https://qwiklabs.com/terms_of_service).

<br>

## Wk 3

### Wk 3.1 : Build a Momentum-based Trading System

#### Wk 3.1.1 : Identify momentum-based factors

##### Wk 3.1.1.1 : å‹•ç”»ä¸­ã®ãƒ†ã‚¹ãƒˆ : Introduction to Momentum Trading

è³ªå• 1 : You can choose two moving average window lengths so that the crossovers will most closely match the optimal buy and sell points in your historical data. What is the weakness of this strategy?

- You may end up with non-standard window lengths that are not widely used.
- You end up using arbitrary window lengths to fit your data.
- <span style='color:green'>âœ”ï¸ It is better to use a single moving average and choose the window length to create the crossover points that most closely match the optimal buy and sell points.</span>

><span style='color:#72e67e'>**æ­£è§£**
This is a big weakness. Anyone can create a strategy that maximizes profit on a historical data set. The problem is that the strategy is only effective for the historical data and fails to perform well with unseen data. This is an example of overfitting your strategy.</span>

è³ªå• 2 : Which of the following are advantages of using moving average ribbons instead of selecting two moving average window lengths to identify buy and sell signals?

<span style='color:green'>âœ”ï¸ You avoid overfitting your data with specific moving average window lengths.</span>

><span style='color:#72e67e'>**æ­£è§£**
Yes, by using a moving average ribbon, your strategy will be based on a whole range of window lengths which will help you avoid overfitting your strategy to two or three specific window lengths.</span>

âŒ Using a moving average ribbon will give you many more buy and sell signals than using two moving average windows

><span style='color:#e99986'>**ã“ã‚Œã‚’é¸æŠã—ãªã„ã§ãã ã•ã„**
Using an MA ribbon instead of selecting two MA window lengths should not have a significant effect on the number of buy and sell signal, if anything it might lead to fewer and better signals. Please review the video on Momentum Trading Strategies.</span>

<span style='color:green'>âœ”ï¸ By looking at the entire "shape" of the ribbon rather than two specific window lengths, you can get a better quality trading signal.</span>

><span style='color:#72e67e'>**æ­£è§£**
Yes, you can rank all of the moving averages and create a normalized score that should give you an improved trade signal.</span>


##### Wk 3.1.1.3 : å­¦ç¿’ç”¨æ•™æ : Hurst Exponent and Trading Signals Derived from Market Time Series

**Hurst Exponent and Trading Signals Derived from Market Time Series**

If you would like to explore the Hurst coefficient as a trading signal, please have a look at â€œ[Hurst Exponent and Trading Signals Derived from Market Time Series](https://raw.githubusercontent.com/englianhu/Coursera-Machine-Learning-for-Trading/090acd0b5db6961655c0172cd766e43419a0341f/2%20Using%20Machine%20Learning%20in%20Trading%20and%20Finance/reference/Hurst%20Exponent%20and%20Trading%20Signals%20Derived%20from%20Market%20Time%20Series.pdf)([origin](https://www.scitepress.org/papers/2018/66670/66670.pdf))â€ by *Petr Kroha and Miroslav Skoula (2018)*. They give a good survey of the theory behind Hurst and also create a â€œMoving Hurstâ€ trading signal that they test against an MACD signal on NASDAQ and DAX data. They conclude that Moving Hurst is a better trade signal than MACD, but that it fails to make a profit when trading costs are factored in.

#### Wk 3.1.2 : Build a trading model that uses momentum factors

##### Wk 3.1.2.9 : ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ : Compare interpretability versus explanatory power of the momentum factor

**Compare interpretability versus explanatory power of the momentum factor**

è¿”ç­”ãŒæŠ•ç¨¿ã•ã‚Œã¾ã—ãŸã€‚ä»¥ä¸‹ã‚ˆã‚Šä»–ã®å—è¬›ç”Ÿã¨äº¤æµã—ã¦è­°è«–ã—ã¾ã—ã‚‡ã†ï¼

> Interpretability is about the extent to which a cause and effect can be observed within a system. Or, to put it another way, it is the extent to which you are able to predict what is going to happen, given a change in input or algorithmic parameters. Itâ€™s being able to look at an algorithm and go yep, I can see whatâ€™s happening here.
> 
Explainability, meanwhile, is the extent to which the internal mechanics of a machine or deep learning system can be explained in human terms. Itâ€™s easy to miss the subtle difference with interpretability, but consider it like this: interpretability is about being able to discern the mechanics without necessarily knowing why. Explainability is being able to quite literally explain what is happening.

##### Wk 3.1.2.11 : Lab: Momentum Strategies

**Lab: Momentum Strategies**

Momentum trading strategies, based on concepts from physics, attempt to take advantage of stocks' tendencies to continue going either up or down, independent of daily fluctuations. Contrarily, mean-reversion strategies are based on trends reversing direction.

In this lab, you'll apply some of the concepts you have learned behind momentum trading and mean reversion by leveraging the [Auquan Toolbox](https://github.com/Auquan/auquan-toolbox-python), a Python library that provides tools for developing trading algorithms. When building trading strategies you'll rarely start from scratch. In this lab you'll be given code of a trading strategy implementation that loses money. Your job will be to modify the code so that the strategy makes money.

**Tips for Course Labs**
Get the most out of Coursera and Qwiklabs by trying our tips below.

**Avoid account confusion with private browsing**
**Close this page and log back in to Coursera in Incognito mode** before moving on. When you return to this course and lab instructions page, click Open Tool to continue.

By using incognito mode, this ensures that you don't accidentally use your own Google account (including Gmail) while accessing the Google Cloud Console. This also prevents Qwiklabs from logging you out of your own Google accounts.

Detailed instructions for using Incognito mode in Google Chrome are [available here](https://support.google.com/chrome/answer/95464?co=GENIE.Platform%3DDesktop&hl=en). Depending on your browser, Incognito mode might also be called Private Browsing or InPrivate Browsing.

To ensure lab completion is marked in Coursera:

1. Access each individual lab by clicking **Open Tool** in Coursera:
2. Complete the lab in Qwiklabs.
3. Click **End Lab** in Qwiklabs (click this only after you are ready to end the lab)
4. Close the Qwiklabs browser window or tab.

If you experience any issues and need support, [submit a request](https://goo.gl/LdYwdN) here. By opening the tool, you are agreeing to Qwiklabs' [Terms of Service](https://qwiklabs.com/terms_of_service).

##### Wk 3.1.2.13 : Optional Lab: Improve Momentum Trading strategies using Hurst

**Optional Lab: Improve Momentum Trading strategies using Hurst**

In this lab, you will:

Understand how the barebones momentum version is working and make yourself comfortable with it

Use the Hurst exponent to create a money making strategy

**Tips for Course Labs**
Get the most out of Coursera and Qwiklabs by trying our tips below.

**Avoid account confusion with private browsing**
**Close this page and log back in to Coursera in Incognito mode** before moving on. When you return to this course and lab instructions page, click Open Tool to continue.

By using incognito mode, this ensures that you don't accidentally use your own Google account (including Gmail) while accessing the Google Cloud Console. This also prevents Qwiklabs from logging you out of your own Google accounts.

Detailed instructions for using Incognito mode in Google Chrome are [available here](https://support.google.com/chrome/answer/95464?co=GENIE.Platform%3DDesktop&hl=en). Depending on your browser, Incognito mode might also be called Private Browsing or InPrivate Browsing.

To ensure lab completion is marked in Coursera:

1. Access each individual lab by clicking **Open Tool** in Coursera:
2. Complete the lab in Qwiklabs.
3. Click **End Lab** in Qwiklabs (click this only after you are ready to end the lab)
4. Close the Qwiklabs browser window or tab.

If you experience any issues and need support, [submit a request](https://goo.gl/LdYwdN) here. By opening the tool, you are agreeing to Qwiklabs' [Terms of Service](https://qwiklabs.com/terms_of_service).

<br>

## Wk 4

### Wk 4.1 : Build a Pair Trading Strategy Prediction Model

#### Wk 4.1.1 : Picking Pairs

##### Wk 4.1.1.1 : å‹•ç”»ä¸­ã®ãƒ†ã‚¹ãƒˆ : Introduction to Pair Trading

è³ªå• 1 : It is important to keep in mind that the beta of a stock is just an estimate based on the regression of the stocks performance each day versus the daily performance of the overall market. Beta can change depending on the historical period you are using for the regression. This is why, for trading, you need to use a fairly recent historical period that will be a good predictor of the stocks performance in the future.

- What is the advantage of using a beta-hedged long-short pair versus a single stock?
- Beta hedging attempts to balance the market risk of the long side of the pair with the market risk of the short side.
- Beta hedging hedges out all risks from your pair strategy.
- <span style='color:green'>âœ”ï¸ Beta hedging hedges out the unsystematic risk of your pair strategy.</span>

><span style='color:#72e67e'>**æ­£è§£**
This is true. When you beta hedge you are not trying to hedge out the idiosyncratic or unsystematic risk of the pair. You are only trying to eliminate the systematic or market risk of the pair by being long the same amount of market risk that you are short in the pair. This means that your strategy is not a bet on the direction of the market, just a bet on the relative performance of the stocks in your pair.</span>

è³ªå• 2 : MSFT is currently trading at 150 with a beta of 0.8 and AAPL is at 250 with a beta of 1.2. Create a beta hedged strategy where you are long 1000 shares of AAPL. How many shares of MSFT should you be short?

- Short 1000 shares of MSFT
- Short 1500 shares of MSFT
- Short 1667 shares of MSFT
- <span style='color:green'>âœ”ï¸ Short 2500 shares of MSFT</span>

><span style='color:#72e67e'>**æ­£è§£**
Correct. You need to short 1000*[1.2/0.8]*[250/150] = 2500 shares of MSFT to adjust for AAPL's higher price and beta.</span>

<br><br>

# Appendix

## Blooper

## Documenting File Creation 

It's useful to record some information about how your file was created.

- File creation date: 2021-09-13
- File latest updated date: `r today('Asia/Tokyo')`
- `r R.version.string`
- [**rmarkdown** package](https://github.com/rstudio/rmarkdown) version: `r packageVersion('rmarkdown')`
- File version: 1.0.0
- Author Profile: [Â®Î³Ïƒ, Eng Lian Hu](https://github.com/scibrokes/owner)
- GitHub: [Source Code](https://github.com/englianhu/Coursera-Machine-Learning-for-Trading)
- Additional session information:

```{r info, warning=FALSE, error=TRUE, results='asis'}
suppressMessages(require('dplyr', quietly = TRUE))
suppressMessages(require('magrittr', quietly = TRUE))
suppressMessages(require('formattable', quietly = TRUE))
suppressMessages(require('knitr', quietly = TRUE))
suppressMessages(require('kableExtra', quietly = TRUE))

sys1 <- devtools::session_info()$platform %>% 
  unlist %>% data.frame(Category = names(.), session_info = .)
rownames(sys1) <- NULL

sys2 <- data.frame(Sys.info()) %>% 
  dplyr::mutate(Category = rownames(.)) %>% .[2:1]
names(sys2)[2] <- c('Sys.info')
rownames(sys2) <- NULL

if (nrow(sys1) == 9 & nrow(sys2) == 8) {
  sys2 %<>% rbind(., data.frame(
  Category = 'Current time', 
  Sys.info = paste(as.character(lubridate::now('Asia/Tokyo')), 'JSTğŸ—¾')))
} else {
  sys1 %<>% rbind(., data.frame(
  Category = 'Current time', 
  session_info = paste(as.character(lubridate::now('Asia/Tokyo')), 'JSTğŸ—¾')))
}

sys <- cbind(sys1, sys2) %>% 
  kbl(caption = 'Additional session information:') %>% 
  kable_styling(bootstrap_options = c('striped', 'hover', 'condensed', 'responsive')) %>% 
  row_spec(0, background = 'DimGrey', color = 'yellow') %>% 
  column_spec(1, background = 'CornflowerBlue', color = 'red') %>% 
  column_spec(2, background = 'grey', color = 'black') %>% 
  column_spec(3, background = 'CornflowerBlue', color = 'blue') %>% 
  column_spec(4, background = 'grey', color = 'white') %>% 
  row_spec(9, bold = T, color = 'yellow', background = '#D7261E')

rm(sys1, sys2)
sys
```

## Reference

<br><br>
